- name: Checkout
  uses: actions/checkout@v4

- name: Setup Node
  uses: actions/setup-node@v4
  with:
    node-version: 20
    cache: npm # ‚Üê remove cache-dependency-path unless you need custom paths

- name: Install (clean)
  run: npm ci

- name: Check formatting (Prettier)
  run: npx prettier --check .

- name: Lint (ESLint)
  run: npm run lint

- name: Unit tests (Vitest)
  run: npm test
  env:
    CI: true
# - name: Unit tests (Vitest)
#   run: npm run test:coverage -- --run
#   env:
#     CI: true

# - name: Upload coverage
#   if: always()
#   uses: actions/upload-artifact@v4
#   with:
#     name: coverage
#     path: coverage/
#     if-no-files-found: ignore
